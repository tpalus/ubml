# ============================================================================
# UBML Resource Types Schema
# ============================================================================
# Defines skills, resource pools, and equipment for capacity planning.
#
# ============================================================================

$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://ubml.talxis.com/schemas/1.2/types/resource.types.yaml"
title: "UBML Resource Types"
description: |
  Resources enable capacity-based simulation and resource matching.
  This schema defines Skills, Resource Pools, and Equipment.

$defs:

  # ==========================================================================
  # SKILL DEFINITION
  # ==========================================================================

  Skill:
    description: |
      Skill definition for capacity planning and resource matching.
      
      Skills represent:
      - Certifications (HGV license, crane operator, PMP)
      - Competencies (negotiation, technical review, coding)
      - Training (safety training, product knowledge)
      
      Skills are referenced by:
      - Actors: who has the skill (with proficiency level)
      - Steps: who can perform the step (with required level)
      - Equipment: who can operate the equipment
      
      Example:
        name: "Crane Operator Certification"
        description: "Licensed to operate tower cranes per OSHA requirements"
    type: object
    additionalProperties: false
    required: [name]
    properties:
      name:
        description: |
          Human-readable skill name.
          
          Examples:
            - "Crane Operator Certification"
            - "HGV License Class C"
            - "Contract Negotiation"
            - "SAP Configuration"
        type: string
      
      description:
        description: |
          Detailed description of the skill requirements.
          Include certification bodies, validity periods, or prerequisites.
        type: string

  # ==========================================================================
  # RESOURCE POOL DEFINITION
  # ==========================================================================

  ResourcePool:
    description: |
      Resource pool for capacity-based simulation.
      
      A resource pool represents a group of interchangeable resources
      (people with the same role/skills, or people + equipment pairs).
      
      WHY EQUIPMENT ON RESOURCE POOLS:
      Many industries require pairing people with equipment:
      - "Delivery crew" = driver with HGV license + delivery truck
      - "Crane crew" = crane operator with certification + tower crane
      - "Field technician" = technician + service vehicle + tools
      
      When equipment is specified, simulation matches:
      1. Available person from pool with required skills
      2. Available equipment from the equipment list
      Only when BOTH are available can work proceed.
      
      Example:
        name: "Delivery Crew"
        actor: AC010  # Delivery Driver role
        capacity: 5
        hoursPerDay: 8
        skills: [SK00001]  # HGV License
        equipment: [EQ00001, EQ00002, EQ003, EQ004, EQ005]  # 5 trucks
    type: object
    additionalProperties: false
    required: [name, actor]
    properties:
      name:
        description: |
          Human-readable pool name.
          
          Examples:
            - "Delivery Crew"
            - "Senior Engineers"
            - "Customer Service Agents"
        type: string
      
      actor:
        description: |
          Actor ID (usually a role or team) that members of this pool have.
          Used to connect the pool to organizational structure.
        $ref: "../defs/refs.defs.yaml#/$defs/ActorRef"
      
      capacity:
        description: |
          Number of people in this pool.
          Limits concurrent work - only 'capacity' work items can be processed.
        type: integer
        minimum: 1
      
      hoursPerDay:
        description: |
          Available hours per day per person.
          Used for effort-based scheduling in simulation.
          
          Example: 8 for full-time, 4 for half-time
        type: number
      
      rate:
        description: |
          Cost rate for this pool.
          Overrides individual actor rates for simulation costing.
        $ref: "../defs/primitives.defs.yaml#/$defs/Rate"
      
      skills:
        description: |
          Skill IDs available in this pool.
          All members of the pool are assumed to have these skills.
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/SkillRef"
      
      equipment:
        description: |
          Equipment IDs that members of this pool use.
          
          When specified, each pool member is paired with equipment.
          Work can only proceed when both person AND equipment are available.
          
          Example: A "Delivery Crew" pool with 5 drivers and 5 trucks.
          Only 5 deliveries can happen concurrently even if demand is higher.
        type: array
        items:
          $ref: "../defs/refs.defs.yaml#/$defs/EquipmentRef"
      
      wipLimit:
        description: |
          Maximum concurrent work items (for ops/service modeling).
          
          Different from capacity: wipLimit is per-pool, capacity is headcount.
          Use for kanban-style WIP limits.
        type: integer
        minimum: 1
      
      custom:
        description: "User-defined custom fields."
        $ref: "../defs/shared.defs.yaml#/$defs/CustomFields"

  # ==========================================================================
  # EQUIPMENT DEFINITION
  # ==========================================================================

  Equipment:
    description: |
      Physical equipment, vehicle, machine, or tool used in processes.
      
      WHY EQUIPMENT IS SEPARATE FROM ACTORS:
      Actors answer "WHO does the work?" - people, roles, teams, organizations.
      Equipment answers "WHAT physical assets are used?"
      
      This separation matters because:
      1. Equipment cannot be accountable - only people appear in RACI
      2. Equipment requires operators with specific skills/certifications
      3. Equipment has physical location constraints
      4. Simulation must match: available skilled person + available equipment
      
      EXAMPLES BY INDUSTRY:
      ┌─────────────────┬────────────────────────────────────────────────┐
      │ Industry        │ Equipment Examples                             │
      ├─────────────────┼────────────────────────────────────────────────┤
      │ Construction    │ Cranes, excavators, concrete mixers, scaffolds │
      │ Manufacturing   │ CNC machines, assembly lines, forklifts        │
      │ Logistics       │ Trucks, vans, warehouse robots, pallet jacks   │
      │ Healthcare      │ MRI machines, surgical robots, monitors        │
      │ Field Services  │ Service vehicles, diagnostic tools, meters     │
      └─────────────────┴────────────────────────────────────────────────┘
    type: object
    additionalProperties: false
    required: [name, type]
    properties:
      name:
        description: |
          Human-readable equipment name.
          
          Examples:
            - "Tower Crane #1"
            - "Delivery Truck - Prague"
            - "CNC Mill Station A"
        type: string
      
      description:
        description: "Detailed description of the equipment."
        type: string
      
      type:
        description: |
          Equipment classification:
          
          - vehicle: cars, trucks, vans, forklifts, cranes
          - machine: production lines, CNC, 3D printers, assembly equipment
          - tool: hand tools, power tools, specialized equipment
          - device: sensors, scanners, diagnostic equipment, tablets
          - infrastructure: fixed assets like loading docks, test rigs
        type: string
        enum: [vehicle, machine, tool, device, infrastructure]
      
      requiredSkill:
        description: |
          Skill required to operate this equipment.
          
          Maps to certifications and licenses:
          - HGV license for trucks
          - Forklift certification for forklifts
          - Crane operator license for cranes
          - Working at height certification for scaffolding
          
          When set, only actors with this skill can use this equipment.
        $ref: "../defs/refs.defs.yaml#/$defs/SkillRef"
      
      location:
        description: |
          Where this equipment is stationed or stored.
          
          For mobile equipment (vehicles), this is the home base.
          For fixed equipment (machines), this is the installation site.
        $ref: "../defs/refs.defs.yaml#/$defs/LocationRef"
      
      capacity:
        description: |
          Throughput or load capacity of this equipment.
          
          Units depend on equipment type:
          - Vehicle: load capacity in kg or items
          - Machine: units per hour
          - Tool: N/A (typically omit)
        type: number
      
      rate:
        description: |
          Cost per time unit when equipment is in use.
          Used for simulation costing.
        $ref: "../defs/primitives.defs.yaml#/$defs/Rate"
      
      owner:
        description: "Actor who owns or manages this equipment."
        $ref: "../defs/refs.defs.yaml#/$defs/ActorRef"
      
      tags:
        description: "Tags for filtering and grouping equipment."
        type: array
        items:
          type: string
      
      custom:
        description: "User-defined custom fields."
        $ref: "../defs/shared.defs.yaml#/$defs/CustomFields"

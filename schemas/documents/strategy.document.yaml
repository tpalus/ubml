# ============================================================================
# UBML Strategy Document Schema
# ============================================================================
# Schema for .strategy.ubml.yaml files - strategic element definitions.
#
# VERSION: 1.0
# FILE PATTERN: *.strategy.ubml.yaml
# ============================================================================

$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://ubml.io/schemas/1.0/documents/strategy.document.yaml"
title: "UBML Strategy Document"
description: |
  Strategy documents define strategic elements that provide context
  for process models.
  
  WHAT ARE STRATEGIC ELEMENTS?
  Strategic elements connect processes to business value:
  - Value Streams: End-to-end value delivery flows
  - Capabilities: What the organization can do
  - Products: Tangible offerings
  - Services: Intangible offerings
  - Portfolios: Groupings for management
  
  WHY DEFINE STRATEGY?
  Strategic elements enable:
  - Process prioritization
  - Capability gap analysis
  - Investment decisions
  - Strategic alignment
  
  FILE NAMING: *.strategy.ubml.yaml
  Examples:
    - enterprise-capabilities.strategy.ubml.yaml
    - product-portfolio.strategy.ubml.yaml
    - value-streams.strategy.ubml.yaml
  
  GETTING STARTED:
  1. Define value streams for customer journeys
  2. Map capabilities required
  3. Connect to products and services
  4. Link processes to capabilities

type: object
additionalProperties: false
required: [ubml]

properties:
  ubml:
    description: |
      UBML version identifier.
      Must be "1.0" for this schema version.
    type: string
    const: "1.0"
  
  name:
    description: |
      Optional document name.
      If not provided, the filename is used.
    type: string
  
  description:
    description: |
      Document description.
      Explain what strategic elements are defined in this file.
    type: string
  
  valueStreams:
    description: |
      Value stream definitions, keyed by value stream ID.
      
      Value stream IDs follow the VS### pattern (e.g., VS001, VS002).
      
      Example:
        valueStreams:
          VS001:
            name: "Order to Cash"
            description: "From order to payment collection"
            customer: AC001
            triggeringEvent: "Customer places order"
            endingEvent: "Payment received"
    type: object
    additionalProperties: false
    patternProperties:
      "^VS\\d{3,}$":
        $ref: "../fragments/strategy.fragment.yaml#/$defs/ValueStream"
  
  capabilities:
    description: |
      Capability definitions, keyed by capability ID.
      
      Capability IDs follow the CP### pattern (e.g., CP001, CP002).
      
      Example:
        capabilities:
          CP001:
            name: "Manage Customer Orders"
            level: 2
            maturity: 3
            targetMaturity: 4
            strategicImportance: essential
    type: object
    additionalProperties: false
    patternProperties:
      "^CP\\d{3,}$":
        $ref: "../fragments/strategy.fragment.yaml#/$defs/Capability"
  
  products:
    description: |
      Product definitions, keyed by product ID.
      
      Product IDs follow the PD### pattern (e.g., PD001, PD002).
      
      Example:
        products:
          PD001:
            name: "Enterprise License"
            category: software
            lifecycle: maturity
            price: 50000
    type: object
    additionalProperties: false
    patternProperties:
      "^PD\\d{3,}$":
        $ref: "../fragments/strategy.fragment.yaml#/$defs/Product"
  
  services:
    description: |
      Service definitions, keyed by service ID.
      
      Service IDs follow the SV### pattern (e.g., SV001, SV002).
      
      Example:
        services:
          SV001:
            name: "Implementation Services"
            type: professional
            deliveryModel: hybrid
            pricing: fixed
    type: object
    additionalProperties: false
    patternProperties:
      "^SV\\d{3,}$":
        $ref: "../fragments/strategy.fragment.yaml#/$defs/Service"
  
  portfolios:
    description: |
      Portfolio definitions, keyed by portfolio ID.
      
      Portfolio IDs follow the PF### pattern (e.g., PF001, PF002).
      
      Example:
        portfolios:
          PF001:
            name: "Enterprise Product Line"
            type: product
            products: [PD001, PD002, PD003]
    type: object
    additionalProperties: false
    patternProperties:
      "^PF\\d{3,}$":
        $ref: "../fragments/strategy.fragment.yaml#/$defs/Portfolio"
  
  metadata:
    description: "Document metadata."
    type: object
    additionalProperties: false
    properties:
      createdAt:
        type: string
        format: date-time
      createdBy:
        type: string
      updatedAt:
        type: string
        format: date-time
      updatedBy:
        type: string
  
  tags:
    description: "Tags for filtering and organization."
    type: array
    items:
      type: string
  
  custom:
    description: "User-defined custom fields."
    $ref: "../common/defs.schema.yaml#/$defs/CustomFields"

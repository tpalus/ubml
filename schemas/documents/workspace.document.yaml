# ============================================================================
# UBML Workspace Document Schema
# ============================================================================
# Schema for .workspace.ubml.yaml files - the root workspace configuration.
#
# VERSION: 1.0
# FILE PATTERN: *.workspace.ubml.yaml
# ============================================================================

$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://ubml.io/schemas/1.0/documents/workspace.document.yaml"
title: "UBML Workspace Document"
description: |
  The workspace document is the root configuration file for a UBML project.
  
  WHAT IS A WORKSPACE?
  A workspace is a collection of related process models, actors, entities,
  and other artifacts that together describe a business domain or initiative.
  
  WORKSPACE STRUCTURE:
  A typical UBML workspace contains:
  - One workspace.ubml.yaml (this file)
  - One or more process files (*.process.ubml.yaml)
  - Actor definitions (*.actors.ubml.yaml)
  - Information model (*.entities.ubml.yaml)
  - And other domain-specific files
  
  FILE NAMING: *.workspace.ubml.yaml
  Example: acme-order-management.workspace.ubml.yaml
  
  GETTING STARTED:
  1. Create a workspace file with name and description
  2. Add process files for your business processes
  3. Add actor files to define roles and teams
  4. Add entity files for your information model

type: object
additionalProperties: false
required: [ubml, name]

properties:
  ubml:
    description: |
      UBML version identifier.
      Must be "1.0" for this schema version.
    type: string
    const: "1.0"
  
  name:
    description: |
      Workspace name.
      Should be descriptive and unique within your organization.
      
      Examples:
        - "ACME Order Management"
        - "Customer Onboarding Transformation"
        - "Supply Chain Optimization"
    type: string
  
  description:
    description: |
      Detailed workspace description.
      Explain the scope, objectives, and context of this workspace.
    type: string
  
  version:
    description: |
      Workspace version for change tracking.
      Recommend semantic versioning (e.g., "1.0.0").
    type: string
  
  status:
    description: |
      Workspace status:
      - draft: Work in progress
      - review: Under stakeholder review
      - approved: Formally approved
      - archived: No longer active
    type: string
    enum: [draft, review, approved, archived]
    default: draft
  
  organization:
    description: |
      Organization this workspace belongs to.
    type: object
    additionalProperties: false
    properties:
      name:
        description: "Organization name."
        type: string
      department:
        description: "Department or business unit."
        type: string
      contact:
        description: "Primary contact email."
        type: string
        format: email
  
  scope:
    description: |
      Scope definition for the workspace.
    type: object
    additionalProperties: false
    properties:
      inScope:
        description: "What is included in this workspace."
        type: array
        items:
          type: string
      outOfScope:
        description: "What is explicitly excluded."
        type: array
        items:
          type: string
      assumptions:
        description: "Key assumptions."
        type: array
        items:
          type: string
      constraints:
        description: "Known constraints."
        type: array
        items:
          type: string
  
  files:
    description: |
      Explicit file references (optional).
      By default, all .ubml.yaml files in the workspace directory are included.
      Use this to specify explicit includes/excludes or order.
    type: object
    additionalProperties: false
    properties:
      include:
        description: "Glob patterns for files to include."
        type: array
        items:
          type: string
        default: ["**/*.ubml.yaml"]
      exclude:
        description: "Glob patterns for files to exclude."
        type: array
        items:
          type: string
  
  defaults:
    description: |
      Default values applied to all elements in the workspace.
    type: object
    additionalProperties: false
    properties:
      processLevel:
        description: "Default process level."
        type: integer
        minimum: 1
        maximum: 6
      currency:
        description: "Default currency code (ISO 4217)."
        type: string
        pattern: "^[A-Z]{3}$"
      timezone:
        description: "Default timezone (IANA name)."
        type: string
      workingHours:
        description: "Default working hours."
        type: string
  
  terminology:
    description: |
      Custom terminology mappings.
      Allows organizations to use their own terms while maintaining
      UBML compatibility.
      
      Example:
        terminology:
          step: "Activity"
          actor: "Role"
          process: "Workflow"
    type: object
    additionalProperties:
      type: string
  
  metadata:
    description: |
      Workspace metadata for tracking and governance.
    type: object
    additionalProperties: false
    properties:
      createdAt:
        type: string
        format: date-time
      createdBy:
        type: string
      updatedAt:
        type: string
        format: date-time
      updatedBy:
        type: string
      approvedAt:
        type: string
        format: date-time
      approvedBy:
        type: string
  
  owner:
    description: "Workspace owner."
    $ref: "../common/defs.schema.yaml#/$defs/ActorRef"
  
  stakeholders:
    description: "Key stakeholders."
    type: array
    items:
      $ref: "../common/defs.schema.yaml#/$defs/ActorRef"
  
  tags:
    description: "Tags for filtering and organization."
    type: array
    items:
      type: string
  
  custom:
    description: "User-defined custom fields."
    $ref: "../common/defs.schema.yaml#/$defs/CustomFields"

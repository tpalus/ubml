# ============================================================================
# UBML Scenarios Document Schema
# ============================================================================
# Schema for .scenarios.ubml.yaml files - simulation scenario definitions.
#
# VERSION: 1.0
# FILE PATTERN: *.scenarios.ubml.yaml
# ============================================================================

$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://ubml.io/schemas/1.0/documents/scenarios.document.yaml"
title: "UBML Scenarios Document"
description: |
  Scenario documents define simulation scenarios for "what-if" analysis.
  
  WHAT IS A SCENARIO?
  A scenario captures the conditions and assumptions for simulating
  process execution:
  - Work arrivals (how work enters the system)
  - Work mix (distribution of case types)
  - Work attributes (characteristics affecting processing)
  - Evidence (historical data for validation)
  
  WHY DEFINE SCENARIOS?
  Scenarios enable:
  - Capacity planning
  - Bottleneck identification
  - Process improvement validation
  - Resource optimization
  
  FILE NAMING: *.scenarios.ubml.yaml
  Examples:
    - baseline-2024.scenarios.ubml.yaml
    - growth-scenarios.scenarios.ubml.yaml
    - peak-season.scenarios.ubml.yaml
  
  GETTING STARTED:
  1. Define a baseline scenario with current volumes
  2. Add work arrival patterns
  3. Define work mix distribution
  4. Create alternative scenarios for comparison

type: object
additionalProperties: false
required: [ubml]

properties:
  ubml:
    description: |
      UBML version identifier.
      Must be "1.0" for this schema version.
    type: string
    const: "1.0"
  
  name:
    description: |
      Optional document name.
      If not provided, the filename is used.
    type: string
  
  description:
    description: |
      Document description.
      Explain what scenarios are defined in this file.
    type: string
  
  scenarios:
    description: |
      Scenario definitions, keyed by scenario ID.
      
      Scenario IDs follow the SC### pattern (e.g., SC001, SC002).
      
      Example:
        scenarios:
          SC001:
            name: "Current State Baseline"
            description: "2024 Q1 baseline scenario"
            arrivals:
              pattern: poisson
              rate: 50
              rateUnit: per-day
            workMix:
              - name: Standard
                probability: 0.8
              - name: Complex
                probability: 0.2
    type: object
    additionalProperties: false
    patternProperties:
      "^SC\\d{3,}$":
        $ref: "../fragments/scenario.fragment.yaml#/$defs/Scenario"
  
  metadata:
    description: "Document metadata."
    type: object
    additionalProperties: false
    properties:
      createdAt:
        type: string
        format: date-time
      createdBy:
        type: string
      updatedAt:
        type: string
        format: date-time
      updatedBy:
        type: string
  
  tags:
    description: "Tags for filtering and organization."
    type: array
    items:
      type: string
  
  custom:
    description: "User-defined custom fields."
    $ref: "../common/defs.schema.yaml#/$defs/CustomFields"
